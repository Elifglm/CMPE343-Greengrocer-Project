<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="controller.CartController"
            prefWidth="900" prefHeight="650"
            style="-fx-background-color: linear-gradient(to bottom right, #0F172A, #1E293B);">

    <!-- Header -->
    <top>
        <HBox spacing="16" alignment="CENTER_LEFT"
              style="-fx-background-color: rgba(255, 255, 255, 0.03); -fx-border-color: transparent transparent rgba(255, 255, 255, 0.08) transparent; -fx-border-width: 0 0 1 0; -fx-padding: 20 32;">
            <Label text="ðŸ›’" style="-fx-font-size: 28;"/>
            <VBox spacing="2">
                <Label fx:id="titleLabel" text="Shopping Cart" 
                       style="-fx-font-size: 20; -fx-font-weight: 700; -fx-text-fill: #FFFFFF;"/>
                <Label text="Review your items before checkout" 
                       style="-fx-font-size: 13; -fx-text-fill: rgba(255, 255, 255, 0.5);"/>
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="â† Back to Shop" onAction="#handleClose"
                    style="-fx-background-color: rgba(255, 255, 255, 0.06); -fx-text-fill: #E2E8F0; -fx-border-color: rgba(255, 255, 255, 0.1); -fx-border-width: 1; -fx-background-radius: 10; -fx-border-radius: 10; -fx-padding: 10 20; -fx-cursor: hand;"/>
        </HBox>
    </top>

    <!-- Main Content -->
    <center>
        <VBox spacing="20" style="-fx-padding: 24 32;">
            
            <!-- Cart Table -->
            <VBox spacing="12" VBox.vgrow="ALWAYS"
                  style="-fx-background-color: rgba(255, 255, 255, 0.03); -fx-background-radius: 16; -fx-border-radius: 16; -fx-border-color: rgba(255, 255, 255, 0.08); -fx-padding: 0;">
                
                <TableView fx:id="cartTable" VBox.vgrow="ALWAYS"
                           style="-fx-background-color: transparent;">
                    <columns>
                        <TableColumn fx:id="nameCol" text="Product" prefWidth="280"/>
                        <TableColumn fx:id="kgCol" text="Quantity (kg)" prefWidth="140"/>
                        <TableColumn fx:id="unitPriceCol" text="Unit Price" prefWidth="160"/>
                        <TableColumn fx:id="lineTotalCol" text="Total" prefWidth="160"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- Actions Row -->
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Button text="Remove Selected" onAction="#handleRemoveSelected"
                        style="-fx-background-color: rgba(248, 113, 113, 0.1); -fx-text-fill: #F87171; -fx-border-color: rgba(248, 113, 113, 0.3); -fx-border-width: 1; -fx-background-radius: 10; -fx-border-radius: 10; -fx-padding: 10 20; -fx-cursor: hand;"/>
                <Button text="Clear All" onAction="#handleClear"
                        style="-fx-background-color: transparent; -fx-text-fill: rgba(255, 255, 255, 0.5); -fx-padding: 10 16; -fx-cursor: hand;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="infoLabel" text="" style="-fx-font-size: 13; -fx-text-fill: #10B981;"/>
            </HBox>

        </VBox>
    </center>

    <!-- Footer / Checkout Summary -->
    <bottom>
        <VBox spacing="0">
            
            <!-- Coupon Section -->
            <HBox spacing="12" alignment="CENTER_LEFT"
                  style="-fx-background-color: rgba(255, 255, 255, 0.03); -fx-border-color: rgba(255, 255, 255, 0.08) transparent transparent transparent; -fx-border-width: 1 0 0 0; -fx-padding: 16 32;">
                <Label text="ðŸŽŸï¸" style="-fx-font-size: 18;"/>
                <TextField fx:id="couponField" 
                           promptText="Enter coupon code..." 
                           prefWidth="200" prefHeight="40"
                           style="-fx-background-color: rgba(255, 255, 255, 0.06); -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: rgba(255, 255, 255, 0.1); -fx-padding: 0 16; -fx-text-fill: #FFFFFF; -fx-prompt-text-fill: rgba(255, 255, 255, 0.4);"/>
                <Button text="Apply" onAction="#handleApplyCoupon"
                        style="-fx-background-color: rgba(251, 191, 36, 0.15); -fx-text-fill: #FBBF24; -fx-border-color: rgba(251, 191, 36, 0.3); -fx-border-width: 1; -fx-background-radius: 10; -fx-border-radius: 10; -fx-padding: 10 20; -fx-cursor: hand;"/>
                <Label fx:id="couponInfoLabel" text="" style="-fx-font-size: 13; -fx-text-fill: #10B981;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox spacing="2" alignment="CENTER_RIGHT">
                    <Label fx:id="discountLabel" text="" style="-fx-font-size: 13; -fx-text-fill: #FBBF24;"/>
                    <Label fx:id="loyaltyLabel" text="" style="-fx-font-size: 12; -fx-text-fill: rgba(255, 255, 255, 0.5);"/>
                </VBox>
            </HBox>
            
            <!-- Totals Section -->
            <HBox spacing="24" alignment="CENTER_RIGHT"
                  style="-fx-background-color: rgba(255, 255, 255, 0.05); -fx-padding: 20 32;">
                
                <VBox spacing="4" alignment="CENTER_RIGHT">
                    <HBox spacing="8" alignment="CENTER_RIGHT">
                        <Label text="Subtotal:" style="-fx-text-fill: rgba(255, 255, 255, 0.5); -fx-font-size: 13;"/>
                        <Label fx:id="subtotalLabel" text="0.00 TL" style="-fx-text-fill: #E2E8F0; -fx-font-size: 13;"/>
                    </HBox>
                    <HBox spacing="8" alignment="CENTER_RIGHT">
                        <Label text="VAT (18%):" style="-fx-text-fill: rgba(255, 255, 255, 0.5); -fx-font-size: 13;"/>
                        <Label fx:id="vatLabel" text="0.00 TL" style="-fx-text-fill: #E2E8F0; -fx-font-size: 13;"/>
                    </HBox>
                </VBox>
                
                <Separator orientation="VERTICAL" style="-fx-background-color: rgba(255, 255, 255, 0.1);"/>
                
                <VBox spacing="4" alignment="CENTER_RIGHT">
                    <Label text="Total" style="-fx-text-fill: rgba(255, 255, 255, 0.5); -fx-font-size: 12;"/>
                    <Label fx:id="totalLabel" text="0.00 TL" 
                           style="-fx-font-size: 28; -fx-font-weight: 700; -fx-text-fill: #10B981;"/>
                </VBox>
                
                <Button text="Proceed to Checkout" onAction="#handleCheckout"
                        prefHeight="50"
                        style="-fx-background-color: linear-gradient(to right, #2D7A4F, #10B981); -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: 600; -fx-background-radius: 12; -fx-padding: 0 32; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(16, 185, 129, 0.4), 12, 0, 0, 4);"/>
            </HBox>
        </VBox>
    </bottom>

</BorderPane>
